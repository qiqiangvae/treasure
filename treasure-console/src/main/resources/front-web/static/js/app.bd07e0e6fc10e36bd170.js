webpackJsonp([1],{C0Mt:function(e,t){},KttY:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-container",[t("el-header",{staticClass:"site-title"},[t("h1",[this._v("作草分茶的宝藏")])]),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},r,!1,function(e){n("KttY")},null,null).exports,l=n("/ocq"),i={data:function(){return{activeIndex:"FileBrowser"}},created:function(){this.$router.push("/"+this.activeIndex)},watch:{activeIndex:function(){this.$router.push("/"+this.activeIndex)}},methods:{handleSelect:function(e,t){console.log(e,t),this.activeIndex=e}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",{staticStyle:{padding:"0"}},[t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":this.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:this.handleSelect}},[t("el-menu-item",{attrs:{index:"FileBrowser"}},[this._v("文件浏览")]),this._v(" "),t("el-menu-item",{attrs:{index:"QuickCommand"}},[this._v("快捷命令")])],1)],1),this._v(" "),t("el-main",[t("el-card",{staticClass:"box-card"},[t("router-view")],1)],1)],1)},staticRenderFns:[]},c=n("VU/8")(i,s,!1,null,null,null).exports,u=n("//Fk"),d=n.n(u),m=n("mtWM"),f=n.n(m),h=n("zL8q"),p=n.n(h),v=f.a.create({baseURL:"/",timeout:6e4}),b=function(){S.push({path:"/login",query:{backRouter:S.currentRoute.fullPath}})};v.interceptors.request.use(function(e){return localStorage.getItem("token")&&(e.headers.Authorization=localStorage.getItem("token")),e},function(e){return console.log(e),d.a.reject(e)}),v.interceptors.response.use(function(e){if(200==e.status){var t=e.data;return 2e3==t.code?t.data:(Object(h.Message)({type:"error",message:t.message}),d.a.reject(t.data))}console.log("请求失败",e)},function(e){if(e.message.indexOf("timeout")>-1)return d.a.reject("请求超时了,请重试！");var t=e.response.status;if(t)switch(t){case 401:Object(h.Message)({type:"error",message:"暂无权限，请先登陆哦！"}),b();break;case 403:Object(h.Message)({type:"error",message:"登陆过期，请重新登陆！"}),localStorage.removeItem("token"),b();case 500:Object(h.Message)({type:"error",message:"服务器异常！"});default:console.log(e.code)}});var _=v,g={data:function(){return{files:[],currentPath:["index"]}},created:function(){this.fetchData("")},methods:{sizeFormatter:function(e){return e.size+"B"},clickRowHandle:function(e){"directory"==e.fileType&&(this.fetchData(e.name),this.currentPath.push(e.name))},fetchData:function(e){var t=this;_({method:"get",url:"api/listResource?path="+e}).then(function(e){return t.files=e.context})}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.currentPath,function(t,a){return n("el-breadcrumb-item",{key:a},[e._v(e._s(t))])}),1)],1),e._v(" "),n("el-main",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.files},on:{"row-dblclick":e.clickRowHandle}},[n("el-table-column",{attrs:{prop:"name",label:"文件名",width:"300"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fileType",label:"文件类型",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"size",formatter:e.sizeFormatter,label:"文件大小"}}),e._v(" "),n("el-table-column",{attrs:{prop:"modifyTime",width:"150",label:"修改时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"accessUrl",width:"450",label:"下载地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{attrs:{href:t.row.accessUrl}},[e._v(e._s(t.row.accessUrl))])]}}])})],1)],1)],1)},staticRenderFns:[]};var x=n("VU/8")(g,w,!1,function(e){n("C0Mt")},"data-v-9fe9a4bc",null).exports,y=n("NC6I"),k=n.n(y),C={data:function(){return{dialogVisible:!1,commands:[],result:[]}},created:function(){var e=this;_({method:"get",url:"api/listCommand"}).then(function(t){return e.commands=t})},methods:{open:function(e){var t=this;this.current=e,e.open?this.executeCommandHandle(e.id):this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(n){var a=n.value;t.executeCommandHandle(e.id,a)}).catch(function(){t.$message({type:"info",message:"取消执行"}),t.handleClose()})},executeCommandHandle:function(e,t){var n=this;_.post("api/executeCommand",{id:e,password:k()(t)}).then(function(e){n.result=e,n.dialogVisible=!0}).catch(function(e){return console.log(e)})},handleClose:function(){this.result=[]}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.commands}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"command",label:"命令",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"workDir",label:"工作路径"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.open(t.row)}}},[e._v("执行")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"执行结果",visible:e.dialogVisible,width:"60%","show-close":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._l(e.result,function(t,a){return n("div",{key:a},[n("h4",[e._v("命令："+e._s(t.command)+" 工作路径："+e._s(t.workDir)),n("br")]),e._v(" "),e._l(t.resultInfo,function(t,a){return n("span",{key:a},[e._v(e._s(t)+" "),n("br")])})],2)}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]},R=n("VU/8")(C,F,!1,null,null,null).exports;a.default.use(l.a);var I=l.a.prototype.push;l.a.prototype.push=function(e){return I.call(this,e).catch(function(e){return e})};var S=new l.a({routes:[{path:"/",name:"Home",redirect:"/FileBrowser",component:c,children:[{path:"/FileBrowser",name:"FileBrowser",component:x},{path:"/QuickCommand",name:"QuickCommand",component:R}]}]}),V=n("aLYK");n("tvR6");a.default.config.productionTip=!1,a.default.use(p.a),a.default.use(V.a,f.a),new a.default({el:"#app",router:S,components:{App:o},template:"<App/>"})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bd07e0e6fc10e36bd170.js.map